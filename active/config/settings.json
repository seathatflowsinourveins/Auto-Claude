{
  "$schema": "https://claude.ai/settings.schema.json",
  "_comment": "LETTA ULTRAMAX V9 APEX - Ultimate Claude Code CLI Configuration",
  "_version": "9.0.0",
  "_updated": "2026-01-17",
  
  "model": {
    "default": "claude-sonnet-4-5-20250929",
    "extendedThinking": {
      "enabled": true,
      "budgetTokens": 127998,
      "model": "claude-opus-4-5-20251101"
    },
    "router": {
      "enabled": true,
      "strategy": "rl_adaptive",
      "explorationRate": 0.1,
      "hourlyBudget": 10.0
    }
  },

  "api": {
    "maxTokens": 64000,
    "timeout": 120000,
    "retries": 3,
    "retryDelay": 1000
  },

  "permissions": {
    "allow": [
      "Read(**)",
      "Write(~/.claude/**)",
      "Write(~/projects/**)",
      "Execute(npm, yarn, pnpm, bun, cargo, uv, pip)",
      "Execute(git, gh)",
      "Execute(docker, kubectl)",
      "Network(localhost:*, api.anthropic.com, github.com, pypi.org, registry.npmjs.org)"
    ],
    "deny": [
      "Execute(rm -rf /)",
      "Write(/etc/**, /usr/**)",
      "Execute(sudo *, su *)"
    ]
  },

  "mcp": {
    "pools": {
      "primary": {
        "strategy": "weighted_round_robin",
        "failover": "failover",
        "healthCheck": {
          "enabled": true,
          "intervalMs": 5000,
          "failureThreshold": 3
        },
        "servers": [
          {
            "name": "filesystem",
            "command": "npx",
            "args": ["-y", "@anthropic-ai/mcp-server-filesystem", "/"],
            "weight": 1
          },
          {
            "name": "memory",
            "command": "npx",
            "args": ["-y", "@anthropic-ai/mcp-server-memory"],
            "weight": 1
          },
          {
            "name": "github",
            "command": "gh",
            "args": ["mcp"],
            "weight": 1
          },
          {
            "name": "context7",
            "command": "npx",
            "args": ["-y", "@context7/mcp-server"],
            "weight": 2
          },
          {
            "name": "sequential",
            "command": "npx",
            "args": ["-y", "@anthropic-ai/mcp-server-sequential-thinking"],
            "weight": 1
          }
        ]
      },
      "failover": {
        "strategy": "round_robin",
        "servers": [
          {
            "name": "backup-filesystem",
            "command": "npx",
            "args": ["-y", "@anthropic-ai/mcp-server-filesystem", "/"]
          }
        ]
      },
      "trading": {
        "strategy": "latency_based",
        "enabled": false,
        "_comment": "Enable for AlphaForge project",
        "servers": [
          {
            "name": "alpaca",
            "command": "npx",
            "args": ["-y", "@alpaca/mcp-server"],
            "env": {
              "ALPACA_PAPER": "true"
            }
          },
          {
            "name": "polygon",
            "command": "npx",
            "args": ["-y", "@polygon-io/mcp-server"]
          }
        ]
      },
      "creative": {
        "strategy": "least_connections",
        "enabled": false,
        "_comment": "Enable for State of Witness project",
        "servers": [
          {
            "name": "touchdesigner",
            "command": "python",
            "args": ["-m", "touchdesigner_mcp"]
          },
          {
            "name": "playwright",
            "command": "npx",
            "args": ["-y", "@anthropic-ai/mcp-server-playwright"]
          }
        ]
      }
    }
  },

  "hooks": {
    "enabled": true,
    "architecture": "event_sourced",
    "eventStore": {
      "path": "~/.claude/v9/events.db",
      "retention": "30d"
    },
    "pipeline": {
      "stages": [
        {"name": "validation", "order": 1, "enabled": true},
        {"name": "enrichment", "order": 2, "enabled": true},
        {"name": "transform", "order": 3, "enabled": true},
        {"name": "execute", "order": 4, "enabled": true},
        {"name": "project", "order": 5, "enabled": true},
        {"name": "notify", "order": 6, "enabled": true}
      ]
    },
    "handlers": {
      "PreToolUse": [
        {
          "type": "uv_script",
          "path": "~/.claude/v9/hooks/pre_tool_use.py",
          "timeout": 5000
        }
      ],
      "PostToolUse": [
        {
          "type": "uv_script", 
          "path": "~/.claude/v9/hooks/post_tool_use.py",
          "timeout": 5000
        }
      ],
      "SessionStart": [
        {
          "type": "uv_script",
          "path": "~/.claude/v9/hooks/session_start.py",
          "timeout": 10000
        }
      ],
      "SessionEnd": [
        {
          "type": "uv_script",
          "path": "~/.claude/v9/hooks/session_end.py",
          "timeout": 30000
        }
      ]
    }
  },

  "letta": {
    "enabled": true,
    "baseUrl": "http://localhost:8283",
    "projects": {
      "alphaforge": {
        "agentId": "agent-alphaforge-001",
        "mode": "trading",
        "safetyLayers": 18,
        "paperTrading": true
      },
      "state-of-witness": {
        "agentId": "agent-witness-001", 
        "mode": "creative",
        "safetyLayers": 12
      },
      "claude-ecosystem": {
        "agentId": "agent-ecosystem-001",
        "mode": "development",
        "safetyLayers": 14
      }
    },
    "sleeptime": {
      "enabled": true,
      "architecture": "federated",
      "frequency": {
        "min": 2,
        "max": 15,
        "adaptive": true
      },
      "prefetch": {
        "enabled": true,
        "lstmPrediction": true
      }
    },
    "memory": {
      "tiers": {
        "L0_ultra": {"maxSize": 500, "ttlMs": 60000},
        "L1_hot": {"maxSize": 2000, "ttlMs": 300000},
        "L2_warm": {"maxSize": 5000, "ttlMs": 3600000},
        "L3_cold": {"enabled": true},
        "L4_deep": {"enabled": true},
        "L5_archive": {"enabled": true}
      }
    }
  },

  "safety": {
    "architecture": "fortress_v9",
    "layers": 18,
    "tradingMode": {
      "enabled": false,
      "paperOnly": true,
      "positionLimit": 100000,
      "dailyTradeLimit": 50
    },
    "killSwitch": {
      "path": "~/.claude/KILL_SWITCH",
      "checkIntervalMs": 1000
    },
    "circuitBreaker": {
      "failureThreshold": 5,
      "recoveryTimeoutMs": 60000
    },
    "rateLimiting": {
      "requestsPerMinute": 60,
      "burstLimit": 100
    },
    "anomalyDetection": {
      "enabled": true,
      "threshold": 0.7
    }
  },

  "skills": {
    "architecture": "dag_graph",
    "maxTokens": 8000,
    "graphs": {
      "system-architect": {
        "priority": 100,
        "triggers": ["design", "architecture", "system"],
        "dependencies": []
      },
      "code-master": {
        "priority": 90,
        "triggers": ["implement", "code", "function", "class"],
        "dependencies": ["system-architect"]
      },
      "safety-guardian": {
        "priority": 95,
        "triggers": ["security", "safety", "audit", "risk"],
        "dependencies": ["system-architect"]
      },
      "trading-strategist": {
        "priority": 85,
        "triggers": ["trading", "trade", "position", "order"],
        "dependencies": ["safety-guardian"]
      },
      "risk-manager": {
        "priority": 88,
        "triggers": ["risk", "exposure", "limit"],
        "dependencies": ["trading-strategist"]
      },
      "creative-director": {
        "priority": 80,
        "triggers": ["creative", "visual", "design", "art"],
        "dependencies": []
      },
      "visual-artist": {
        "priority": 75,
        "triggers": ["shader", "particle", "animation"],
        "dependencies": ["creative-director"]
      },
      "devops-engineer": {
        "priority": 70,
        "triggers": ["deploy", "kubernetes", "docker", "ci/cd"],
        "dependencies": ["system-architect"]
      },
      "research-analyst": {
        "priority": 65,
        "triggers": ["research", "analyze", "investigate"],
        "dependencies": []
      },
      "letta-memory": {
        "priority": 60,
        "triggers": ["remember", "memory", "recall", "learn"],
        "dependencies": []
      },
      "letta-sync": {
        "priority": 55,
        "triggers": ["sync", "save", "persist"],
        "dependencies": ["letta-memory"]
      }
    }
  },

  "observability": {
    "metrics": {
      "enabled": true,
      "port": 9090,
      "path": "/metrics"
    },
    "logging": {
      "level": "info",
      "format": "json",
      "output": "~/.claude/v9/logs/"
    },
    "tracing": {
      "enabled": true,
      "exporter": "otlp",
      "endpoint": "http://localhost:4318"
    }
  },

  "experimental": {
    "multiAgent": {
      "enabled": false,
      "maxConcurrent": 3
    },
    "streamingResponses": {
      "enabled": true
    },
    "knowledgeGraph": {
      "enabled": false,
      "neo4jUrl": "bolt://localhost:7687"
    }
  }
}
