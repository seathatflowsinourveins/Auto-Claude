{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "^(Write|Edit|MultiEdit)$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:TOOL_INPUT_file_path) { npx @claude-flow/cli@latest hooks pre-edit --file $env:TOOL_INPUT_file_path 2>$null }\"",
            "timeout": 5000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:TOOL_INPUT_file_path) { npx @claude-flow/cli@latest hooks security-check --file $env:TOOL_INPUT_file_path --detect-patterns true 2>$null }\"",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Bash$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:TOOL_INPUT_command) { npx @claude-flow/cli@latest hooks pre-command --command $env:TOOL_INPUT_command 2>$null }\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Task$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:TOOL_INPUT_prompt) { npx @claude-flow/cli@latest hooks pre-task --task-id ('task-' + [DateTimeOffset]::Now.ToUnixTimeSeconds()) --description $env:TOOL_INPUT_prompt 2>$null }\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^(Read|Grep|Glob)$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"npx @claude-flow/cli@latest hooks pre-search --cache-check true 2>$null\"",
            "timeout": 2000,
            "continueOnError": true
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "^(Write|Edit|MultiEdit)$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:TOOL_INPUT_file_path) { $success = if ($env:TOOL_SUCCESS) { $env:TOOL_SUCCESS } else { 'true' }; npx @claude-flow/cli@latest hooks post-edit --file $env:TOOL_INPUT_file_path --success $success 2>$null }\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Bash$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:TOOL_INPUT_command) { $success = if ($env:TOOL_SUCCESS) { $env:TOOL_SUCCESS } else { 'true' }; npx @claude-flow/cli@latest hooks post-command --command $env:TOOL_INPUT_command --success $success 2>$null }\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^Task$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:TOOL_RESULT_agent_id) { $success = if ($env:TOOL_SUCCESS) { $env:TOOL_SUCCESS } else { 'true' }; npx @claude-flow/cli@latest hooks post-task --task-id $env:TOOL_RESULT_agent_id --success $success 2>$null }\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "^(Read|Grep|Glob)$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"npx @claude-flow/cli@latest hooks post-search --cache-results true 2>$null\"",
            "timeout": 2000,
            "continueOnError": true
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:PROMPT) { npx @claude-flow/cli@latest hooks route --task $env:PROMPT 2>$null }\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"$status = npx @claude-flow/cli@latest daemon status 2>$null; if ($LASTEXITCODE -ne 0 -or $status -notmatch 'RUNNING') { npx @claude-flow/cli@latest daemon start --quiet 2>$null }\"",
            "timeout": 8000,
            "continueOnError": true
          },
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:SESSION_ID) { npx @claude-flow/cli@latest hooks session-restore --session-id $env:SESSION_ID 2>$null } else { Write-Output 'No session to restore' }\"",
            "timeout": 10000,
            "continueOnError": true
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:SESSION_ID) { npx @claude-flow/cli@latest hooks session-save --session-id $env:SESSION_ID 2>$null }\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "manual",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"npx @claude-flow/cli@latest hooks pre-compact --mode manual --preserve-context true 2>$null\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "auto",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"npx @claude-flow/cli@latest hooks pre-compact --mode auto --summary true 2>$null\"",
            "timeout": 5000,
            "continueOnError": true
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Evaluate if the subagent has completed its assigned task. Check: 1) Were all requested changes made? 2) Did any errors occur? 3) Is the output complete? Respond with {\"decision\": \"stop\"} if complete, or {\"decision\": \"continue\", \"reason\": \"...\"} if more work is needed.",
            "timeout": 30
          }
        ]
      }
    ],
    "PermissionRequest": [
      {
        "matcher": "^mcp__claude-flow__.*$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"Write-Output '{\\\"hookSpecificOutput\\\": {\\\"hookEventName\\\": \\\"PermissionRequest\\\", \\\"decision\\\": {\\\"behavior\\\": \\\"allow\\\", \\\"message\\\": \\\"Claude Flow MCP tool auto-approved\\\"}}}'\"",
            "timeout": 1000
          }
        ]
      },
      {
        "matcher": "^mcp__(exa|tavily|firecrawl|jina|perplexity|context7|serper|linear)__.*$",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"Write-Output '{\\\"hookSpecificOutput\\\": {\\\"hookEventName\\\": \\\"PermissionRequest\\\", \\\"decision\\\": {\\\"behavior\\\": \\\"allow\\\", \\\"message\\\": \\\"Research tool auto-approved\\\"}}}'\"",
            "timeout": 1000
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Evaluate if the current task has been completed successfully. Consider: 1) Were all requested changes made? 2) Did tests pass (if applicable)? 3) Were any errors unresolved? 4) Is there explicit follow-up work needed? Respond with {\"decision\": \"stop\", \"reason\": \"Task completed successfully\"} if complete, or {\"decision\": \"block\", \"reason\": \"[specific remaining work]\"} if more work is needed.",
            "timeout": 30
          }
        ]
      }
    ],
    "Notification": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"if ($env:NOTIFICATION_MESSAGE) { $key = 'notify-' + [DateTimeOffset]::Now.ToUnixTimeSeconds(); npx @claude-flow/cli@latest memory store --namespace notifications --key $key --value $env:NOTIFICATION_MESSAGE 2>$null }\"",
            "timeout": 3000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "permission_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"npx @claude-flow/cli@latest hooks notify --type permission --log true 2>$null\"",
            "timeout": 2000,
            "continueOnError": true
          }
        ]
      },
      {
        "matcher": "idle_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"npx @claude-flow/cli@latest hooks notify --type idle --check-background-tasks true 2>$null\"",
            "timeout": 2000,
            "continueOnError": true
          }
        ]
      }
    ]
  },
  "statusLine": {
    "type": "command",
    "command": "C:/Windows/System32/WindowsPowerShell/v1.0/powershell.exe -NoProfile -Command \"try { npx @claude-flow/cli@latest hooks statusline 2>$null } catch { Write-Output 'â–Š Claude Flow V3' }\"",
    "refreshMs": 5000,
    "enabled": true
  },
  "permissions": {
    "allow": [
      "Bash(npx claude-flow:*)",
      "Bash(npx @claude-flow/cli:*)",
      "Bash(powershell:*)",
      "Bash(git:*)",
      "Bash(npm:*)",
      "Bash(python:*)",
      "Bash(uv:*)",
      "mcp__claude-flow__:*"
    ],
    "deny": [
      "Write(**/.env)",
      "Write(**/.env.*)",
      "Write(**/secrets/**)",
      "Write(**/credentials/**)",
      "Write(**/*.pem)",
      "Write(**/*.key)"
    ]
  },
  "attribution": {
    "commit": "Co-Authored-By: claude-flow <ruv@ruv.net>",
    "pr": "ðŸ¤– Generated with [claude-flow](https://github.com/ruvnet/claude-flow)"
  },
  "claudeFlow": {
    "version": "3.0.0",
    "enabled": true,
    "modelPreferences": {
      "default": "claude-opus-4-5-20251101",
      "routing": "claude-3-5-haiku-20241022",
      "complex": "claude-opus-4-5-20251101",
      "balanced": "claude-sonnet-4-5-20250929",
      "fast": "claude-3-5-haiku-20241022"
    },
    "swarm": {
      "topology": "hierarchical-mesh",
      "maxAgents": 15
    },
    "memory": {
      "backend": "hybrid",
      "enableHNSW": true
    },
    "neural": {
      "enabled": true
    },
    "daemon": {
      "autoStart": true,
      "workers": [
        "map",
        "audit",
        "optimize",
        "consolidate",
        "testgaps",
        "ultralearn",
        "deepdive",
        "document",
        "refactor",
        "benchmark"
      ],
      "schedules": {
        "audit": {
          "interval": "1h",
          "priority": "critical"
        },
        "optimize": {
          "interval": "30m",
          "priority": "high"
        },
        "consolidate": {
          "interval": "2h",
          "priority": "low"
        },
        "document": {
          "interval": "1h",
          "priority": "normal",
          "triggers": [
            "adr-update",
            "api-change"
          ]
        },
        "deepdive": {
          "interval": "4h",
          "priority": "normal",
          "triggers": [
            "complex-change"
          ]
        },
        "ultralearn": {
          "interval": "1h",
          "priority": "normal"
        }
      }
    },
    "learning": {
      "enabled": true,
      "autoTrain": true,
      "patterns": [
        "coordination",
        "optimization",
        "prediction"
      ],
      "retention": {
        "shortTerm": "24h",
        "longTerm": "30d"
      }
    },
    "adr": {
      "autoGenerate": true,
      "directory": "/docs/adr",
      "template": "madr"
    },
    "ddd": {
      "trackDomains": true,
      "validateBoundedContexts": true,
      "directory": "/docs/ddd"
    },
    "security": {
      "autoScan": true,
      "scanOnEdit": true,
      "cveCheck": true,
      "threatModel": true,
      "blockDestructive": true,
      "sanitizePaths": true,
      "maxInputSize": 100000
    }
  }
}
